

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial &mdash; PyPEEC</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
    <link rel="shortcut icon" href="../_static/icon.png"/>
    <link rel="canonical" href="https://pypeec.otvam.ch/content/tutorial.html" />
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=a027e6bf"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="Installation" href="install.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #7a9aa3" >

          
          
          <a href="../index.html" class="icon icon-home">
            PyPEEC - 5.5.4
              <img src="../_static/sphinx.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">General Doc</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#step-1-setup">Step 1: Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-2-introduction">Step 2: Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-3-mesher">Step 3: Mesher</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-4-viewer">Step 4: Viewer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-5-solver">Step 5: Solver</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-6-plotter">Step 6: Plotter</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflow</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Technical Doc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="method.html">PEEC Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="technical.html">Technical Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="formats.html">File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="warnings.html">Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Doc</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #7a9aa3" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyPEEC - 5.5.4</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tutorial</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Link to this heading"></a></h1>
<section id="step-1-setup">
<h2>Step 1: Setup<a class="headerlink" href="#step-1-setup" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install PyPEEC</span>
<span class="c1">#   - With a Python Environment</span>
<span class="c1">#   - With a Conda Environment</span>

<span class="c1"># Check the PyPEEC version</span>
pypeec<span class="w"> </span>--version

<span class="c1"># Extract the PyPEEC examples</span>
pypeec<span class="w"> </span>examples<span class="w"> </span>examples

<span class="c1"># Extract the PyPEEC documentation</span>
pypeec<span class="w"> </span>documentation<span class="w"> </span>documentation
</pre></div>
</div>
</section>
<section id="step-2-introduction">
<h2>Step 2: Introduction<a class="headerlink" href="#step-2-introduction" title="Link to this heading"></a></h2>
<p>This tutorial demonstrates how PyPEEC can be used to simulate a four-layer PCB coil.
The coil has two terminals and the simulation is done in the frequency domain.
All the command are executed inside the virtual environment from the <code class="docutils literal notranslate"><span class="pre">examples</span></code> folder.</p>
<figure class="align-default" id="id1">
<img alt="../_images/geometry.png" src="../_images/geometry.png" />
<figcaption>
<p><span class="caption-text">Geometry of the considered four-layer PCB coil.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="step-3-mesher">
<h2>Step 3: Mesher<a class="headerlink" href="#step-3-mesher" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the mesher from the command line</span>
<span class="c1">#   - geometry.yaml - contains the geometry description (input)</span>
<span class="c1">#   - voxel.json.gz - contains the meshed voxel structure (output)</span>

pypeec<span class="w"> </span>mesher<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--geometry<span class="w"> </span>tutorial/geometry.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--voxel<span class="w"> </span>tutorial/voxel.json.gz
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the mesher from the Python interpreter</span>
<span class="c1">#   - geometry.yaml - contains the geometry description (input)</span>
<span class="c1">#   - voxel.json.gz - contains the meshed voxel structure (output)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pypeec</span>

<span class="n">file_geometry</span> <span class="o">=</span> <span class="s2">&quot;tutorial/geometry.yaml&quot;</span>
<span class="n">file_voxel</span> <span class="o">=</span> <span class="s2">&quot;tutorial/voxel.json.gz&quot;</span>

<span class="n">pypeec</span><span class="o">.</span><span class="n">run_mesher_file</span><span class="p">(</span>
    <span class="n">file_geometry</span><span class="o">=</span><span class="n">file_geometry</span><span class="p">,</span>
    <span class="n">file_voxel</span><span class="o">=</span><span class="n">file_voxel</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>00:00:00.00 : MAIN     : INFO     : load the input data
00:00:00.01 : MAIN     : INFO     : load the mesher
00:00:01.15 : MAIN     : INFO     : run the mesher
00:00:01.15 : MESHER   : INFO     : check the input data
00:00:01.15 : MESHER   : INFO     : mesher_shape : enter : timing
00:00:01.15 : SHAPE    : DEBUG    :     parse the layers
00:00:01.15 : SHAPE    : DEBUG    :     create the shapes
00:00:01.16 : SHAPE    : DEBUG    :     get the voxel size
00:00:01.16 : SHAPE    : DEBUG    :     voxelize the shapes
00:00:01.19 : SHAPE    : DEBUG    :     trace: n_voxel = 19728
00:00:01.19 : SHAPE    : DEBUG    :     via: n_voxel = 1195
00:00:01.19 : SHAPE    : DEBUG    :     src: n_voxel = 361
00:00:01.19 : SHAPE    : DEBUG    :     sink: n_voxel = 361
00:00:01.19 : SHAPE    : DEBUG    :     merge the shapes
00:00:01.21 : MESHER   : INFO     : mesher_shape : exit : 00:00:00.05
00:00:01.21 : MESHER   : INFO     : voxel_resample : enter : timing
00:00:01.21 : SAMPLE   : DEBUG    :     use_reduce = False
00:00:01.21 : SAMPLE   : DEBUG    :     use_resample = False
00:00:01.21 : SAMPLE   : DEBUG    :     original number = 331056
00:00:01.21 : SAMPLE   : DEBUG    :     final number = 331056
00:00:01.21 : MESHER   : INFO     : voxel_resample : exit : 00:00:00.00
00:00:01.21 : MESHER   : INFO     : voxel_cloud : enter : timing
00:00:01.21 : CLOUD    : DEBUG    :     initial number = 9
00:00:01.22 : CLOUD    : DEBUG    :     final number = 9
00:00:01.22 : MESHER   : INFO     : voxel_cloud : exit : 00:00:00.00
00:00:01.22 : MESHER   : INFO     : voxel_conflict : enter : timing
00:00:01.22 : MESHER   : INFO     : voxel_conflict : exit : 00:00:00.00
00:00:01.22 : MESHER   : INFO     : voxel_connection : enter : timing
00:00:01.31 : MESHER   : INFO     : voxel_connection : exit : 00:00:00.08
00:00:01.31 : MESHER   : INFO     : voxel_summary : enter : timing
00:00:01.31 : SUMMARY  : DEBUG    :     voxel size
00:00:01.31 : SUMMARY  : DEBUG    :         n = (132, 132, 19)
00:00:01.31 : SUMMARY  : DEBUG    :         d = (3.50e-05, 3.50e-05, 3.50e-05)
00:00:01.31 : SUMMARY  : DEBUG    :         s = (4.63e-03, 4.63e-03, 6.65e-04)
00:00:01.31 : SUMMARY  : DEBUG    :         c = (1.94e-03, 1.94e-03, 0.00e+00)
00:00:01.31 : SUMMARY  : DEBUG    :         A = (2.14e-05, 3.08e-06, 3.08e-06)
00:00:01.31 : SUMMARY  : DEBUG    :     voxel summary
00:00:01.31 : SUMMARY  : DEBUG    :         V_total = 1.42e-08
00:00:01.31 : SUMMARY  : DEBUG    :         V_used = 9.12e-10
00:00:01.31 : SUMMARY  : DEBUG    :         n_total = 331056
00:00:01.31 : SUMMARY  : DEBUG    :         n_used = 21215
00:00:01.31 : SUMMARY  : DEBUG    :         ratio = 6.41e-02
00:00:01.31 : SUMMARY  : DEBUG    :         n_domain = 4
00:00:01.31 : SUMMARY  : DEBUG    :         n_graph = 1
00:00:01.31 : SUMMARY  : DEBUG    :     voxel domain
00:00:01.31 : SUMMARY  : DEBUG    :         trace = 19298
00:00:01.31 : SUMMARY  : DEBUG    :         via = 1195
00:00:01.31 : SUMMARY  : DEBUG    :         src = 361
00:00:01.31 : SUMMARY  : DEBUG    :         sink = 361
00:00:01.31 : MESHER   : INFO     : voxel_summary : exit : 00:00:00.00
00:00:01.31 : MESHER   : INFO     : duration: 00:00:00.15
00:00:01.31 : MAIN     : INFO     : successful termination
00:00:01.31 : MAIN     : INFO     : save the results
</pre></div>
</div>
</section>
<section id="step-4-viewer">
<h2>Step 4: Viewer<a class="headerlink" href="#step-4-viewer" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the viewer from the command line</span>
<span class="c1">#   - voxel.json.gz - contains the meshed voxel structure (input)</span>
<span class="c1">#   - viewer.yaml - contains the plot configuration (input)</span>
<span class="c1">#   - tag_plot - list of plots to be shown (defined in viewer.yaml)</span>

pypeec<span class="w"> </span>viewer<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--voxel<span class="w"> </span>tutorial/voxel.json.gz<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--viewer<span class="w"> </span>config/viewer.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--tag_plot<span class="w"> </span>domain<span class="w"> </span>graph
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the viewer from the Python interpreter</span>
<span class="c1">#   - voxel.json.gz - contains the meshed voxel structure (input)</span>
<span class="c1">#   - viewer.yaml - contains the plot configuration (input)</span>
<span class="c1">#   - tag_plot - list of plots to be shown (defined in viewer.yaml)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pypeec</span>

<span class="n">file_voxel</span> <span class="o">=</span> <span class="s2">&quot;tutorial/voxel.json.gz&quot;</span>
<span class="n">file_viewer</span> <span class="o">=</span> <span class="s2">&quot;config/viewer.yaml&quot;</span>

<span class="n">pypeec</span><span class="o">.</span><span class="n">run_viewer_file</span><span class="p">(</span>
    <span class="n">file_voxel</span><span class="o">=</span><span class="n">file_voxel</span><span class="p">,</span>
    <span class="n">file_viewer</span><span class="o">=</span><span class="n">file_viewer</span><span class="p">,</span>
    <span class="n">tag_plot</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;domain&quot;</span><span class="p">,</span> <span class="s2">&quot;graph&quot;</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id2">
<img alt="../_images/viewer_domain.png" src="../_images/viewer_domain.png" />
<figcaption>
<p><span class="caption-text">Plot showing which the different domains.</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id3">
<img alt="../_images/viewer_graph.png" src="../_images/viewer_graph.png" />
<figcaption>
<p><span class="caption-text">Plot showing which domains are interconnected.</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="step-5-solver">
<h2>Step 5: Solver<a class="headerlink" href="#step-5-solver" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the solver from the command line</span>
<span class="c1">#   - voxel.json.gz - contains the meshed voxel structure (input)</span>
<span class="c1">#   - problem.yaml - contains the magnetic problem description (input)</span>
<span class="c1">#   - tolerance.yaml - contains the solver numerical tolerances (input)</span>
<span class="c1">#   - solution.json.gz - contains the problem solution (output)</span>

pypeec<span class="w"> </span>solver<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--voxel<span class="w"> </span>tutorial/voxel.json.gz<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--problem<span class="w"> </span>tutorial/problem.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--tolerance<span class="w"> </span>config/tolerance.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--solution<span class="w"> </span>tutorial/solution.json.gz
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the solver from the Python interpreter</span>
<span class="c1">#   - voxel.json.gz - contains the meshed voxel structure (input)</span>
<span class="c1">#   - problem.yaml - contains the magnetic problem description (input)</span>
<span class="c1">#   - tolerance.yaml - contains the solver numerical tolerances (input)</span>
<span class="c1">#   - solution.json.gz - contains the problem solution (output)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pypeec</span>

<span class="n">file_voxel</span> <span class="o">=</span> <span class="s2">&quot;tutorial/voxel.json.gz&quot;</span>
<span class="n">file_solution</span> <span class="o">=</span> <span class="s2">&quot;tutorial/solution.json.gz&quot;</span>
<span class="n">file_problem</span> <span class="o">=</span> <span class="s2">&quot;tutorial/problem.yaml&quot;</span>
<span class="n">file_tolerance</span> <span class="o">=</span> <span class="s2">&quot;config/tolerance.yaml&quot;</span>

<span class="n">pypeec</span><span class="o">.</span><span class="n">run_solver_file</span><span class="p">(</span>
    <span class="n">file_voxel</span><span class="o">=</span><span class="n">file_voxel</span><span class="p">,</span>
    <span class="n">file_problem</span><span class="o">=</span><span class="n">file_problem</span><span class="p">,</span>
    <span class="n">file_tolerance</span><span class="o">=</span><span class="n">file_tolerance</span><span class="p">,</span>
    <span class="n">file_solution</span><span class="o">=</span><span class="n">file_solution</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>00:00:00.00 : MAIN     : INFO     : load the input data
00:00:00.03 : MAIN     : INFO     : load the solver
00:00:00.24 : MAIN     : INFO     : run the solver
00:00:00.24 : SOLVER   : INFO     : check the voxel data
00:00:00.24 : SOLVER   : INFO     : check the input data
00:00:00.24 : SOLVER   : INFO     : combine the input data
00:00:00.25 : SOLVER   : INFO     : init : enter : timing
00:00:00.27 : SOLVER   : INFO     :     voxel_geometry : enter : timing
00:00:00.65 : SOLVER   : INFO     :     voxel_geometry : exit : 00:00:00.38
00:00:00.65 : SOLVER   : INFO     :     system_tensor : enter : timing
00:00:00.65 : GREEN    : DEBUG    :         analytical solution: 6D / 1
00:00:00.68 : GREEN    : DEBUG    :         analytical solution: 6D / 4624
00:00:00.83 : GREEN    : DEBUG    :         numerical approximation: 6D / 326432
00:00:00.86 : SOLVER   : INFO     :     system_tensor : exit : 00:00:00.20
00:00:00.86 : SOLVER   : INFO     :     problem_geometry : enter : timing
00:00:00.92 : PROBLEM  : DEBUG    :         n_voxel_total = 331056
00:00:00.92 : PROBLEM  : DEBUG    :         n_voxel_used = 21215
00:00:00.92 : PROBLEM  : DEBUG    :         n_face_total = 993168
00:00:00.92 : PROBLEM  : DEBUG    :         n_face_used = 42062
00:00:00.92 : PROBLEM  : DEBUG    :         n_voxel_electric = 21215
00:00:00.92 : PROBLEM  : DEBUG    :         n_voxel_magnetic = 0
00:00:00.92 : PROBLEM  : DEBUG    :         n_face_electric = 42062
00:00:00.92 : PROBLEM  : DEBUG    :         n_face_magnetic = 0
00:00:00.92 : PROBLEM  : DEBUG    :         n_src_current = 0
00:00:00.92 : PROBLEM  : DEBUG    :         n_src_voltage = 722
00:00:00.92 : PROBLEM  : DEBUG    :         ratio_voxel = 6.41e-02
00:00:00.92 : PROBLEM  : DEBUG    :         ratio_face = 4.24e-02
00:00:00.92 : SOLVER   : INFO     :     problem_geometry : exit : 00:00:00.06
00:00:00.92 : SOLVER   : INFO     :     system_matrix : enter : timing
00:00:00.92 : FFT      : DEBUG    :         multiplication: inductance
00:00:00.92 : FFT      : DEBUG    :             tensor size: (132, 132, 19)
00:00:00.92 : FFT      : DEBUG    :             tensor footprint: 40.41 MB
00:00:01.04 : SOLVER   : INFO     :     system_matrix : exit : 00:00:00.12
00:00:01.04 : SOLVER   : INFO     : init : exit : 00:00:00.79
00:00:01.04 : SOLVER   : INFO     : run sweep: sim_dc : enter : timing
00:00:01.04 : SOLVER   : INFO     :     problem_value : enter : timing
00:00:01.06 : SOLVER   : INFO     :     problem_value : exit : 00:00:00.01
00:00:01.06 : SOLVER   : INFO     :     equation_system : enter : timing
00:00:01.09 : FACTOR   : DEBUG    :         factorization: electric
00:00:01.09 : FACTOR   : DEBUG    :             matrix size: (21937, 21937)
00:00:01.09 : FACTOR   : DEBUG    :             matrix elements: 107505
00:00:01.09 : FACTOR   : DEBUG    :             matrix density: 2.23e-04
00:00:01.09 : FACTOR   : DEBUG    :             compute factorization
00:00:01.30 : FACTOR   : DEBUG    :             factorization success
00:00:01.30 : FACTOR   : DEBUG    :         factorization: magnetic
00:00:01.30 : SOLVER   : INFO     :     equation_system : exit : 00:00:00.24
00:00:01.30 : SOLVER   : INFO     :     equation_solver : enter : timing
00:00:01.30 : COND     : DEBUG    :         condition: electric
00:00:01.30 : COND     : DEBUG    :             matrix size: (21937, 21937)
00:00:01.30 : COND     : DEBUG    :             matrix elements: 107505
00:00:01.30 : COND     : DEBUG    :             matrix density: 2.23e-04
00:00:01.30 : COND     : DEBUG    :             compute LU decomposition
00:00:01.47 : COND     : DEBUG    :             estimate norm of the inverse
00:00:01.61 : COND     : DEBUG    :             estimate norm of the matrix
00:00:01.64 : COND     : DEBUG    :             compute condition estimate
00:00:01.65 : COND     : DEBUG    :         condition: magnetic
00:00:01.65 : EQUATION : DEBUG    :         condition summary
00:00:01.65 : EQUATION : DEBUG    :             check = True
00:00:01.65 : EQUATION : DEBUG    :             status = True
00:00:01.65 : EQUATION : DEBUG    :             cond_electric = 3.25e+06
00:00:01.65 : EQUATION : DEBUG    :             cond_magnetic = 0.00e+00
00:00:01.65 : EQUATION : DEBUG    :             matrix condition is good
00:00:01.65 : EQUATION : DEBUG    :         solver run
00:00:01.65 : EQUATION : DEBUG    :             init / 0.00e+00+0.00e+00j VA
00:00:01.77 : EQUATION : DEBUG    :             i = 1 / 0.00e+00+0.00e+00j VA
00:00:01.82 : EQUATION : DEBUG    :             i = 2 / 7.91e+01+0.00e+00j VA
00:00:01.84 : EQUATION : DEBUG    :             final / 7.91e+01+0.00e+00j VA
00:00:01.84 : EQUATION : DEBUG    :         solver summary
00:00:01.84 : EQUATION : DEBUG    :             check = True
00:00:01.84 : EQUATION : DEBUG    :             status = True
00:00:01.84 : EQUATION : DEBUG    :             n_dof_total = 63999
00:00:01.84 : EQUATION : DEBUG    :             n_dof_electric = 63999
00:00:01.84 : EQUATION : DEBUG    :             n_dof_magnetic = 0
00:00:01.84 : EQUATION : DEBUG    :             n_iter = 2
00:00:01.84 : EQUATION : DEBUG    :             n_sys_eval = 3
00:00:01.84 : EQUATION : DEBUG    :             n_pcd_eval = 3
00:00:01.84 : EQUATION : DEBUG    :             res_rms = 3.32e-13
00:00:01.84 : EQUATION : DEBUG    :             convergence achieved
00:00:01.85 : SOLVER   : INFO     :     equation_solver : exit : 00:00:00.54
00:00:01.85 : SOLVER   : INFO     :     extract_solution : enter : timing
00:00:02.27 : SOLUTION : DEBUG    :         domain: trace_via
00:00:02.27 : SOLUTION : DEBUG    :             P_electric = 7.84e+01 W
00:00:02.27 : SOLUTION : DEBUG    :             P_magnetic = 0.00e+00 W
00:00:02.27 : SOLUTION : DEBUG    :             P_tot = 7.84e+01 W
00:00:02.27 : SOLUTION : DEBUG    :         domain: src_sink
00:00:02.27 : SOLUTION : DEBUG    :             P_electric = 6.78e-01 W
00:00:02.27 : SOLUTION : DEBUG    :             P_magnetic = 0.00e+00 W
00:00:02.27 : SOLUTION : DEBUG    :             P_tot = 6.78e-01 W
00:00:02.27 : SOLUTION : DEBUG    :         terminal: src
00:00:02.27 : SOLUTION : DEBUG    :             type = voltage / lumped
00:00:02.27 : SOLUTION : DEBUG    :             V_src = +1.00e+00 + +0.00e+00j V
00:00:02.27 : SOLUTION : DEBUG    :             V_drop = +4.13e-02 + +0.00e+00j V
00:00:02.27 : SOLUTION : DEBUG    :             V = +9.59e-01 + +0.00e+00j V
00:00:02.27 : SOLUTION : DEBUG    :             I = +4.13e+01 + +0.00e+00j A
00:00:02.27 : SOLUTION : DEBUG    :             S = +3.96e+01 + +0.00e+00j VA
00:00:02.27 : SOLUTION : DEBUG    :         terminal: sink
00:00:02.27 : SOLUTION : DEBUG    :             type = voltage / lumped
00:00:02.27 : SOLUTION : DEBUG    :             V_src = -1.00e+00 + +0.00e+00j V
00:00:02.27 : SOLUTION : DEBUG    :             V_drop = -4.13e-02 + +0.00e+00j V
00:00:02.27 : SOLUTION : DEBUG    :             V = -9.59e-01 + +0.00e+00j V
00:00:02.27 : SOLUTION : DEBUG    :             I = -4.13e+01 + +0.00e+00j A
00:00:02.27 : SOLUTION : DEBUG    :             S = +3.96e+01 + +0.00e+00j VA
00:00:02.27 : SOLUTION : DEBUG    :         integral
00:00:02.27 : SOLUTION : DEBUG    :             S_tot_real = 7.91e+01 VA
00:00:02.27 : SOLUTION : DEBUG    :             S_tot_imag = 0.00e+00j VA
00:00:02.27 : SOLUTION : DEBUG    :             P_electric = 7.91e+01 W
00:00:02.27 : SOLUTION : DEBUG    :             P_magnetic = 0.00e+00 W
00:00:02.27 : SOLUTION : DEBUG    :             W_electric = 4.97e-05 J
00:00:02.27 : SOLUTION : DEBUG    :             W_magnetic = 0.00e+00 J
00:00:02.27 : SOLUTION : DEBUG    :             P_tot = 7.91e+01 W
00:00:02.27 : SOLUTION : DEBUG    :             W_tot = 4.97e-05 J
00:00:02.30 : SOLVER   : INFO     :     extract_solution : exit : 00:00:00.45
00:00:02.30 : SOLVER   : INFO     : run sweep: sim_dc : exit : 00:00:01.25
00:00:02.30 : SOLVER   : INFO     : run sweep: sim_ac : enter : timing
00:00:02.30 : SOLVER   : INFO     :     problem_value : enter : timing
00:00:02.31 : SOLVER   : INFO     :     problem_value : exit : 00:00:00.01
00:00:02.31 : SOLVER   : INFO     :     equation_system : enter : timing
00:00:02.32 : FACTOR   : DEBUG    :         factorization: electric
00:00:02.32 : FACTOR   : DEBUG    :             matrix size: (21937, 21937)
00:00:02.32 : FACTOR   : DEBUG    :             matrix elements: 107505
00:00:02.32 : FACTOR   : DEBUG    :             matrix density: 2.23e-04
00:00:02.32 : FACTOR   : DEBUG    :             compute factorization
00:00:02.44 : FACTOR   : DEBUG    :             factorization success
00:00:02.44 : FACTOR   : DEBUG    :         factorization: magnetic
00:00:02.44 : SOLVER   : INFO     :     equation_system : exit : 00:00:00.12
00:00:02.44 : SOLVER   : INFO     :     equation_solver : enter : timing
00:00:02.44 : COND     : DEBUG    :         condition: electric
00:00:02.44 : COND     : DEBUG    :             matrix size: (21937, 21937)
00:00:02.44 : COND     : DEBUG    :             matrix elements: 107505
00:00:02.44 : COND     : DEBUG    :             matrix density: 2.23e-04
00:00:02.44 : COND     : DEBUG    :             compute LU decomposition
00:00:02.65 : COND     : DEBUG    :             estimate norm of the inverse
00:00:02.76 : COND     : DEBUG    :             estimate norm of the matrix
00:00:02.80 : COND     : DEBUG    :             compute condition estimate
00:00:02.80 : COND     : DEBUG    :         condition: magnetic
00:00:02.80 : EQUATION : DEBUG    :         condition summary
00:00:02.80 : EQUATION : DEBUG    :             check = True
00:00:02.80 : EQUATION : DEBUG    :             status = True
00:00:02.80 : EQUATION : DEBUG    :             cond_electric = 3.25e+06
00:00:02.80 : EQUATION : DEBUG    :             cond_magnetic = 0.00e+00
00:00:02.80 : EQUATION : DEBUG    :             matrix condition is good
00:00:02.80 : EQUATION : DEBUG    :         solver run
00:00:02.81 : EQUATION : DEBUG    :             init / 0.00e+00+0.00e+00j VA
00:00:02.98 : EQUATION : DEBUG    :             i = 1 / 0.00e+00+0.00e+00j VA
00:00:07.53 : EQUATION : DEBUG    :             i = 2 / 8.13e-01+5.40e+00j VA
00:00:07.89 : EQUATION : DEBUG    :             final / 8.13e-01+5.40e+00j VA
00:00:07.89 : EQUATION : DEBUG    :         solver summary
00:00:07.89 : EQUATION : DEBUG    :             check = True
00:00:07.89 : EQUATION : DEBUG    :             status = True
00:00:07.89 : EQUATION : DEBUG    :             n_dof_total = 63999
00:00:07.89 : EQUATION : DEBUG    :             n_dof_electric = 63999
00:00:07.89 : EQUATION : DEBUG    :             n_dof_magnetic = 0
00:00:07.89 : EQUATION : DEBUG    :             n_iter = 2
00:00:07.89 : EQUATION : DEBUG    :             n_sys_eval = 13
00:00:07.89 : EQUATION : DEBUG    :             n_pcd_eval = 13
00:00:07.89 : EQUATION : DEBUG    :             res_rms = 1.57e-09
00:00:07.89 : EQUATION : DEBUG    :             convergence achieved
00:00:07.89 : SOLVER   : INFO     :     equation_solver : exit : 00:00:05.45
00:00:07.89 : SOLVER   : INFO     :     extract_solution : enter : timing
00:00:08.24 : SOLUTION : DEBUG    :         domain: trace_via
00:00:08.24 : SOLUTION : DEBUG    :             P_electric = 8.05e-01 W
00:00:08.24 : SOLUTION : DEBUG    :             P_magnetic = 0.00e+00 W
00:00:08.24 : SOLUTION : DEBUG    :             P_tot = 8.05e-01 W
00:00:08.24 : SOLUTION : DEBUG    :         domain: src_sink
00:00:08.24 : SOLUTION : DEBUG    :             P_electric = 7.84e-03 W
00:00:08.24 : SOLUTION : DEBUG    :             P_magnetic = 0.00e+00 W
00:00:08.24 : SOLUTION : DEBUG    :             P_tot = 7.84e-03 W
00:00:08.24 : SOLUTION : DEBUG    :         terminal: src
00:00:08.24 : SOLUTION : DEBUG    :             type = voltage / lumped
00:00:08.24 : SOLUTION : DEBUG    :             V_src = +1.00e+00 + +0.00e+00j V
00:00:08.24 : SOLUTION : DEBUG    :             V_drop = +8.74e-04 + -5.40e-03j V
00:00:08.24 : SOLUTION : DEBUG    :             V = +9.99e-01 + +5.40e-03j V
00:00:08.24 : SOLUTION : DEBUG    :             I = +8.74e-01 + -5.40e+00j A
00:00:08.24 : SOLUTION : DEBUG    :             S = +4.06e-01 + +2.70e+00j VA
00:00:08.24 : SOLUTION : DEBUG    :         terminal: sink
00:00:08.24 : SOLUTION : DEBUG    :             type = voltage / lumped
00:00:08.25 : SOLUTION : DEBUG    :             V_src = -1.00e+00 + +0.00e+00j V
00:00:08.25 : SOLUTION : DEBUG    :             V_drop = -8.74e-04 + +5.40e-03j V
00:00:08.25 : SOLUTION : DEBUG    :             V = -9.99e-01 + -5.40e-03j V
00:00:08.25 : SOLUTION : DEBUG    :             I = -8.74e-01 + +5.40e+00j A
00:00:08.25 : SOLUTION : DEBUG    :             S = +4.06e-01 + +2.70e+00j VA
00:00:08.25 : SOLUTION : DEBUG    :         integral
00:00:08.25 : SOLUTION : DEBUG    :             S_tot_real = 8.13e-01 VA
00:00:08.25 : SOLUTION : DEBUG    :             S_tot_imag = 5.40e+00j VA
00:00:08.25 : SOLUTION : DEBUG    :             P_electric = 8.13e-01 W
00:00:08.25 : SOLUTION : DEBUG    :             P_magnetic = 0.00e+00 W
00:00:08.25 : SOLUTION : DEBUG    :             W_electric = 4.30e-07 J
00:00:08.25 : SOLUTION : DEBUG    :             W_magnetic = 0.00e+00 J
00:00:08.25 : SOLUTION : DEBUG    :             P_tot = 8.13e-01 W
00:00:08.25 : SOLUTION : DEBUG    :             W_tot = 4.30e-07 J
00:00:08.27 : SOLVER   : INFO     :     extract_solution : exit : 00:00:00.38
00:00:08.27 : SOLVER   : INFO     : run sweep: sim_ac : exit : 00:00:05.97
00:00:08.27 : SOLVER   : INFO     : duration: 00:00:08.03
00:00:08.28 : MAIN     : INFO     : successful termination
00:00:08.28 : MAIN     : INFO     : save the results
</pre></div>
</div>
</section>
<section id="step-6-plotter">
<h2>Step 6: Plotter<a class="headerlink" href="#step-6-plotter" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the plotter from the command line</span>
<span class="c1">#   - solution.json.gz - contains the problem solution (input)</span>
<span class="c1">#   - plotter.yaml - contains the plot configuration (input)</span>
<span class="c1">#   - tag_plot - list of plots to be shown (defined in plotter.yaml)</span>

pypeec<span class="w"> </span>plotter<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--solution<span class="w"> </span>tutorial/solution.json.gz<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--plotter<span class="w"> </span>config/plotter.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--tag_plot<span class="w"> </span>V_c_norm<span class="w"> </span>J_c_norm<span class="w"> </span>H_p_norm<span class="w"> </span>residuum
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the plotter from the Python interpreter</span>
<span class="c1">#   - solution.json.gz - contains the problem solution (input)</span>
<span class="c1">#   - plotter.yaml - contains the plot configuration (input)</span>
<span class="c1">#   - tag_plot - list of plots to be shown (defined in plotter.yaml)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pypeec</span>

<span class="n">file_solution</span> <span class="o">=</span> <span class="s2">&quot;tutorial/solution.json.gz&quot;</span>
<span class="n">file_plotter</span> <span class="o">=</span> <span class="s2">&quot;config/plotter.yaml&quot;</span>

<span class="n">pypeec</span><span class="o">.</span><span class="n">run_plotter_file</span><span class="p">(</span>
    <span class="n">file_solution</span><span class="o">=</span><span class="n">file_solution</span><span class="p">,</span>
    <span class="n">file_plotter</span><span class="o">=</span><span class="n">file_plotter</span><span class="p">,</span>
    <span class="n">tag_plot</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;V_c_norm&quot;</span><span class="p">,</span> <span class="s2">&quot;J_c_norm&quot;</span><span class="p">,</span> <span class="s2">&quot;H_p_norm&quot;</span><span class="p">,</span> <span class="s2">&quot;residuum&quot;</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id4">
<img alt="../_images/plotter_V_c_norm.png" src="../_images/plotter_V_c_norm.png" />
<figcaption>
<p><span class="caption-text">Plot showing the electric potential.</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id5">
<img alt="../_images/plotter_J_c_norm.png" src="../_images/plotter_J_c_norm.png" />
<figcaption>
<p><span class="caption-text">Plot showing the current density.</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id6">
<img alt="../_images/plotter_H_p_norm.png" src="../_images/plotter_H_p_norm.png" />
<figcaption>
<p><span class="caption-text">Plot showing the generated magnetic field.</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id7">
<img alt="../_images/plotter_residuum.png" src="../_images/plotter_residuum.png" />
<figcaption>
<p><span class="caption-text">Plot showing the equation system residuum.</span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Thomas Guillod - Dartmouth College.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>